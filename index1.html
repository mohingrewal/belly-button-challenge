<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Combined Visualizations</title>
    <!-- Include D3 library -->
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <!-- Load Plotly.js -->
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>
<body>
    <!-- D3 JSON Fetch -->
    <div>
        <h2>D3 JSON Fetch</h2>
        <script>
            // Use D3 to fetch JSON data from the URL
            d3.json("https://static.bc-edx.com/data/dl-1-2/m14/lms/starter/samples.json").then(function(data) {
                // Once data is fetched, you can work with it here
                console.log(data); // For example, log the data to the console
                // Further processing or visualization can be done here
            }).catch(function(error) {
                // Handle any errors that occur during fetching
                console.error("Error fetching data:", error);
            });
        </script>
    </div>

    <!-- D3 Bar Chart -->
    <div>
        <h2>D3 Bar Chart</h2>
        <select id="selDataset"></select>
        <div id="bar-chart"></div>
        <script>
            // Fetch JSON data and create bar chart
            <script>
    d3.json("https://static.bc-edx.com/data/dl-1-2/m14/lms/starter/samples.json").then(function(data) {
        // Parse data
        var samples = data.samples;
        var names = data.names;

        // Populate dropdown menu with names
        var dropdown = d3.select("#selDataset");
        names.forEach(function(name) {
            dropdown.append("option").text(name).property("value", name);
        });

        // Function to update bar chart
        function updateBarChart(selectedName) {
            // Code to update the bar chart based on selectedName
        }

        // Initial update with the first sample
        updateBarChart(names[0]);

        // Update chart when dropdown selection changes
        dropdown.on("change", function() {
            var selectedName = this.value;
            // Code to update the bar chart based on selectedName
        });
    }).catch(function(error) {
        console.error("Error fetching data:", error);
    });
</script>

            // Include the D3 Bar Chart code here
        </script>
    </div>

    <!-- Bubble Chart -->
    <div>
        <h2>Bubble Chart</h2>
        <select id="selDataset"></select>
        <div id="bubble-chart"></div>
        <div id="sample-metadata"></div>
        <script>
            // Fetch JSON data and create bubble chart with metadata panel
            <script>
    // Function to update bubble chart and metadata
    function updateCharts(selectedName) {
        // Fetch JSON data
        fetch("https://static.bc-edx.com/data/dl-1-2/m14/lms/starter/samples.json")
        .then(response => response.json())
        .then(function(data) {
            var samples = data.samples;
            var metadata = data.metadata;

            // Find sample data for selected name
            var sample = samples.find(sample => sample.id === selectedName);
            var sampleMetadata = metadata.find(item => item.id === parseInt(selectedName));

            // Bubble chart data
            var trace = {
                // Bubble chart trace data
            };

            var layout = {
                // Bubble chart layout options
            };

            Plotly.newPlot('bubble-chart', [trace], layout);

            // Update metadata panel
            var metadataPanel = document.getElementById('sample-metadata');
            metadataPanel.innerHTML = ''; // Clear existing metadata

            // Loop through metadata and create text string
            Object.entries(sampleMetadata).forEach(([key, value]) => {
                var p = document.createElement('p');
                p.innerText = `${key}: ${value}`;
                metadataPanel.appendChild(p);
            });
        })
        .catch(function(error) {
            console.error("Error fetching data:", error);
        });
    }

    // Populate dropdown menu
    fetch("https://static.bc-edx.com/data/dl-1-2/m14/lms/starter/samples.json")
    .then(response => response.json())
    .then(function(data) {
        var names = data.names;
        var dropdown = document.getElementById('selDataset');
        names.forEach(function(name) {
            var option = document.createElement('option');
            option.value = name;
            option.textContent = name;
            dropdown.appendChild(option);
        });

        // Initial update with the first sample
        updateCharts(names[0]);

        // Update charts when dropdown selection changes
        dropdown.addEventListener('change', function() {
            var selectedName = this.value;
            updateCharts(selectedName);
        });
    })
    .catch(function(error) {
        console.error("Error fetching data:", error);
    });
</script>

            // Include the Bubble Chart code here
        </script>
    </div>
</body>
</html>
